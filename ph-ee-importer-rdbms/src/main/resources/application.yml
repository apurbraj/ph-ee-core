kafka:
  brokers: "kafka:9092"
  consumer-group: cg1

importer:
  kafka:
    topic: "zeebe-export"
    reset: true
    aggreation-window-seconds: 2

spring:
  jpa:
    show-sql: false
    properties:
      eclipselink:
        logging:
          level: "INFO"
          parameters: true
          session: true
          thread: true
          timestamp: true
          logger: "hu.dpc.phee.operator.config.EclipselinkLogger"
    open-in-view: false

datasource:
  common:
    protocol: "jdbc"
    subprotocol: "mysql"
    driverclass_name: "com.mysql.cj.jdbc.Driver"
  core:
    port: 3306
    host: "operationsmysql"
    schema: "tenants"
    username: "mifos"
    password: "password"

server:
  port: 8000

application:
  bucket-name: paymenthub-ee-dev

cloud:
  aws:
    enabled: true
    credentials:
      access-key: ${AWS_ACCESS_KEY:AKIAX32JM37TZOJ5AKFB}
      secret-key: ${AWS_SECRET_KEY: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}
    region:
      static: us-east-2

bpmn:
  transfer-type: "TRANSFER"
  transaction-request-type: "TRANSACTION-REQUEST"
  batch-type: "BATCH"
  incoming-direction: "INCOMING"
  outgoing-direction: "OUTGOING"
  processes:
    - id: "binx_hct_inst_credit_transfer_creditor_process"
      direction: "${bpmn.incoming-direction}"
      type: "${bpmn.transfer-type}"
    - id: "PayeeQuoteTransfer"
      direction: "${bpmn.incoming-direction}"
      type: "${bpmn.transfer-type}"
    - id: "PayerTransactionRequest"
      direction: "${bpmn.incoming-direction}"
      type: "${bpmn.transaction-request-type}"
    - id: "PayerFundTransfer"
      direction: "${bpmn.outgoing-direction}"
      type: "${bpmn.transfer-type}"
    - id: "PayeeTransactionRequest"
      direction: "${bpmn.outgoing-direction}"
      type: "${bpmn.transaction-request-type}"
    - id: "transferProcess"
      direction: "UNKNOWN"
      type: "${bpmn.transfer-type}"
    - id: "bulk_processor"
      direction: "UNKNOWN"
      type: "${bpmn.batch-type}"
    - id: "international_remittance_payee_process"
      direction: "${bpmn.outgoing-direction}"
      type: "${bpmn.transfer-type}"
    - id: "international_remittance_payer_process"
      direction: "${bpmn.outgoing-direction}"
      type: "${bpmn.transfer-type}"
    - id: "mpesa_flow"
      direction: "${bpmn.incoming-direction}"
      type: "${bpmn.transaction-request-type}"
    - id: "mpesa_flow_roster"
      direction: "${bpmn.incoming-direction}"
      type: "${bpmn.transaction-request-type}"
    - id: "mpesa_flow-paygops"
      direction: "${bpmn.incoming-direction}"
      type: "${bpmn.transaction-request-type}"
    - id: "slcb"
      direction: "UNKNOWN"
      type: "${bpmn.batch-type}"

transfer:
  flows:
    - name: binx_hct_inst_credit_transfer_debtor_process
      direction: OUTGOING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].CreditTransferTransactionInformation[0].CreditorAgent.FinancialInstitutionIdentification.BICFI
        - field: payeePartyId
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].CreditTransferTransactionInformation[0].CreditorAccount.Identification.IBAN
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].DebtorAgent.FinancialInstitutionIdentification.BICFI
        - field: payerPartyId
          variable_name: debtorIban
        - field: payerPartyIdType
          constant: IBAN
        - field: payerFee
          variable_name: transactionFeeAmount
        - field: payerFeeCurrency
          variable_name: currency
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: direction
          constant: OUTGOING
        - field: endToEndIdentification
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].CreditTransferTransactionInformation[0].PaymentIdentification.EndToEndIdentification
    - name: binx_hct_inst_credit_transfer_creditor_process
      direction: INCOMING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: originalPacs008
          xpath: /SendCreditTransferRequest/FIToFICstmrCdtTrf/CdtTrfTxInf/CdtrAgt/FinInstnId/BIC
        - field: payeePartyId
          variable_name: creditorIban
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: originalPacs008
          xpath: /SendCreditTransferRequest/FIToFICstmrCdtTrf/CdtTrfTxInf/DbtrAgt/FinInstnId/BIC
        - field: payerPartyId
          variable_name: originalPacs008
          xpath: /SendCreditTransferRequest/FIToFICstmrCdtTrf/CdtTrfTxInf/DbtrAcct/Id/IBAN
        - field: payerPartyIdType
          constant: IBAN
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: endToEndIdentification
          variable_name: originalPacs008
          xpath: /SendCreditTransferRequest/FIToFICstmrCdtTrf/CdtTrfTxInf/PmtId/EndToEndId
    - name: binx_ig2_credit_transfer_debtor_process
      direction: OUTGOING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].CreditTransferTransactionInformation[0].CreditorAgent.FinancialInstitutionIdentification.BICFI
        - field: payeePartyId
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].CreditTransferTransactionInformation[0].CreditorAccount.Identification.IBAN
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].DebtorAgent.FinancialInstitutionIdentification.BICFI
        - field: payerPartyId
          variable_name: debtorIban
        - field: payerPartyIdType
          constant: IBAN
        - field: payerFee
          variable_name: transactionFeeAmount
        - field: payerFeeCurrency
          variable_name: currency
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: endToEndIdentification
          variable_name: originalPain001
          json_path: $.Document.PaymentInformation[0].CreditTransferTransactionInformation[0].PaymentIdentification.EndToEndIdentification
    - name: binx_ig2_credit_transfer_creditor_process
      direction: INCOMING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: originalPacs008
          xpath: /ns4:SendCreditTransferRequest/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:BIC
        - field: payeePartyId
          variable_name: creditorIban
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: originalPacs008
          xpath: /ns4:SendCreditTransferRequest/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:BIC
        - field: payerPartyId
          variable_name: originalPacs008
          xpath: /ns4:SendCreditTransferRequest/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN
        - field: payerPartyIdType
          constant: IBAN
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: endToEndIdentification
          variable_name: originalPacs008
          xpath: /ns4:SendCreditTransferRequest/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtId/ns3:EndToEndId
    - name: binx_onus_credit_transfer
      direction: OUTGOING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: originalPain001
          json_path: $.CustomerCreditTransferInitiation.Document.PaymentInformation[0].CreditTransferTransactionInformation[0].CreditorAgent.FinancialInstitutionIdentification.BICFI
        - field: payeePartyId
          variable_name: creditorIban
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: originalPain001
          json_path: $.CustomerCreditTransferInitiation.Document.PaymentInformation[0].DebtorAgent.FinancialInstitutionIdentification.BICFI
        - field: payerPartyId
          variable_name: debtorIban
        - field: payerPartyIdType
          constant: IBAN
        - field: payerFee
          variable_name: transactionFeeAmount
        - field: payerFeeCurrency
          variable_name: currency
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
    - name: binx_hct_inst_incoming_recall
      direction: INCOMING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: generatedPacs00s4
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:DbtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payeePartyId
          variable_name: generatedPacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:DbtrAcct/ns5:Id/ns5:IBAN
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: generatedPacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:CdtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payerPartyId
          variable_name: debtorIban
        - field: payerPartyIdType
          constant: IBAN
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: endToEndIdentification
          variable_name: camt056
          xpath: /ns3:SendRequestForPaymentCancellationRequest/ns4:FIToFIPmtCxlReq/ns4:Undrlyg/ns4:TxInf/ns4:OrgnlEndToEndId
    - name: binx_hct_inst_outgoing_recall
      direction: OUTGOING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:DbtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payeePartyId
          variable_name: creditorIban
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:CdtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payerPartyId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:CdtrAcct/ns5:Id/ns5:IBAN
        - field: payerPartyIdType
          constant: IBAN
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: endToEndIdentification
          variable_name: generatedCamt056
          xpath: /ns3:SendRequestForPaymentCancellationRequest/ns4:FIToFIPmtCxlReq/ns4:Undrlyg/ns4:TxInf/ns4:OrgnlEndToEndId
    - name: binx_ig2_incoming_recall
      direction: INCOMING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:DbtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payeePartyId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:DbtrAcct/ns5:Id/ns5:IBAN
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:CdtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payerPartyId
          variable_name: debtorIban
        - field: payerPartyIdType
          constant: IBAN
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: endToEndIdentification
          variable_name: camt056
          xpath: /ns3:SendRequestForPaymentCancellationRequest/ns4:FIToFIPmtCxlReq/ns4:Undrlyg/ns4:TxInf/ns4:OrgnlEndToEndId
    - name: binx_ig2_outgoing_recall
      direction: OUTGOING
      transformers:
        - field: transactionId
          variable_name: internalCorrelationId
        - field: payeeDfspId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:DbtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payeePartyId
          variable_name: creditorIban
        - field: payeePartyIdType
          constant: IBAN
        - field: payerDfspId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:CdtrAgt/ns5:FinInstnId/ns5:BIC
        - field: payerPartyId
          variable_name: pacs004
          xpath: /ns3:SendPaymentReturnRequest/ns5:PmtRtr/ns5:TxInf/ns5:OrgnlTxRef/ns5:CdtrAcct/ns5:Id/ns5:IBAN
        - field: payerPartyIdType
          constant: IBAN
        - field: amount
          variable_name: amount
        - field: currency
          variable_name: currency
        - field: endToEndIdentification
          variable_name: camt056
          xpath: /ns3:SendRequestForPaymentCancellationRequest/ns4:FIToFIPmtCxlReq/ns4:Undrlyg/ns4:TxInf/ns4:OrgnlEndToEndId
